# .github/workflows/stack-overflow-workflow.yml
name: StackOverflow Activity

on:
  schedule:
    # 4시간마다 실행 (00:05, 04:05, 08:05, 12:05, 16:05, 20:05)
    - cron: '5 */4 * * *'
  workflow_dispatch:

jobs:
  update-readme-with-stack-overflow:
    name: Update README with StackOverflow Activity
    runs-on: ubuntu-latest
    
    # 타임아웃 설정으로 무한 대기 방지
    timeout-minutes: 10
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3  # v2 → v3로 업데이트
        
      # 캐싱 추가로 중복 API 호출 방지
      - name: Cache StackOverflow data
        uses: actions/cache@v3
        with:
          path: .stackoverflow-cache
          key: stackoverflow-${{ github.run_id }}
          restore-keys: |
            stackoverflow-
            
      - name: Update StackOverflow activity
        uses: jihundev/blog-post-workflow@master
        with:
          comment_tag_name: "STACKOVERFLOW"
          feed_list: "https://stackoverflow.com/feeds/user/5311181"
          max_post_count: "5"
          # 캐시 활용 옵션 (blog-post-workflow가 지원하는 경우)
          enable_cache: true
